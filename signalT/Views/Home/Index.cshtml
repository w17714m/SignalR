@{
    ViewBag.Title = "Index";
}

<!DOCTYPE html>
<html>
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
<body>
<div>

    <div class="container">
        <label>Nombre</label>
        <input id="nombre"  type="text" placeholder="Inserte el nombre" />

        <label>mensaje</label>
        <input  id="message" type="text" placeholder="Inserte el mensaje"/>

        <br/>
        <button id="enviar"> enviar</button>
    </div>

    <div>
        <ul id="result">
            
        </ul>
    </div>



</div>

<script src="~/Scripts/jquery-1.6.4.js"></script>
<script src="~/Scripts/jquery.signalR-2.2.1.js"></script>
<!--Reference the autogenerated SignalR hub script. -->

<script>
    var connection = $.hubConnection();

    var contosoChatHubProxy = connection.createHubProxy('signalRChat');

    contosoChatHubProxy.on('addContosoChatMessageToPage', function (name, message) {

        var abj = $('<li>' +
            name + ' ' + message
            + '</li>');
        $('#result').append(abj);
        console.log(name + ' ' + message);
    });


    $('#enviar').click(function() {
        contosoChatHubProxy.invoke('newContosoChatMessage', $('#nombre').val(), $('#message').val());
    });

    connection.start().done(
        function () {
            alert('Inicio correctamente el websocket.');
        }
    );

    
</script>


</body>
</html>


